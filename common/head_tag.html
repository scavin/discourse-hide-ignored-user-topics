<script type="text/discourse-plugin" version="1.6.0">

// 修改 topic-list 组件
api.modifyClass('component:topic-list', {
    pluginId: 'remove-ignored-users-topic',

    didInsertElement() {
        this._super(...arguments); // 调用父类的 didInsertElement 方法

        const ignoredUsers = api.getCurrentUser()?.ignored_users || [];
        const ignoredUserSet = new Set(ignoredUsers);

        // 隐藏被忽略用户的主题项
        this.$('.topic-list-item').each((index, element) => {
            const creatorName = $(element).data('creator-name');
            if (ignoredUserSet.has(creatorName)) {
                $(element).hide(); // 隐藏该主题项
            }
        });
    }
});

</script>
